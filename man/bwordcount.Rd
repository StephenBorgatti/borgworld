% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/b_wordcount.R
\name{bwordcount}
\alias{bwordcount}
\title{Word frequency analysis with optional grouping}
\usage{
bwordcount(
  df,
  text_col,
  group_col = NULL,
  values = "pct",
  remove_stopwords = TRUE
)
}
\arguments{
\item{df}{A data frame or tibble containing the text data.}

\item{text_col}{Unquoted column name containing text to analyze.}

\item{group_col}{Optional unquoted column name for grouping. When provided,
word frequencies are calculated within each group and results are pivoted
to wide format with a column per group level.}

\item{values}{Type of values to return: "freq" for raw counts, "prop" for
proportions (0-1), or "pct" for percentages (0-100). Default is "pct".}

\item{remove_stopwords}{Logical; if TRUE (default), removes common English
stopwords (e.g., "the", "and", "is") using the tidytext stop_words dataset.}
}
\value{
A data frame with columns:
\itemize{
\item \code{word}: The extracted word (lowercase).
\item \code{total}: Overall frequency/proportion/percentage across all text.
\item If \code{group_col} is provided: one column per group level containing
the frequency/proportion/percentage within that group.
}
Results are sorted by \code{total} in descending order. Numeric values are
formatted with appropriate decimal places (1 for percentages, 3 for
proportions, 0 for frequencies).
}
\description{
Extracts words from a text column, counts their frequencies, and optionally
groups results by a categorical variable. Can return raw frequencies,
proportions, or percentages.
}
\details{
Words are extracted using a regex pattern that matches sequences of lowercase
letters and apostrophes (e.g., "don't" is kept as one word). All text is
converted to lowercase before extraction.

When \code{group_col} is provided:
\itemize{
\item Proportions/percentages in group columns are calculated relative to
the total words within each group.
\item The \code{total} column shows the overall proportion/percentage
relative to all words in the dataset.
\item Groups with zero occurrences of a word show 0.
}
}
\examples{
\dontrun{
# Simple word frequency
df <- data.frame(
  text = c("The quick brown fox", "The lazy dog", "Quick brown dogs")
)
bwordcount(df, text)

# With grouping
df <- data.frame(
  text = c("I love cats", "Dogs are great", "Cats are cute", "I love dogs"),
  person = c("Alice", "Bob", "Alice", "Bob")
)
bwordcount(df, text, person)

# Raw frequencies without stopword removal
bwordcount(df, text, values = "freq", remove_stopwords = FALSE)
}

}
